# 🌐 网络问题诊断指南

## 🔍 **你的问题：不同网段**

```
Mac端IP:     10.226.6.13      (10.226.6.x 网段)
Android端IP: 10.226.7.134     (10.226.7.x 网段)
                    ↑ 不同！
```

**结论：** 你们在**不同的子网**，所以自动扫描找不到对方。

---

## ❓ **为什么会出现不同网段？**

### 1. **双频WiFi（最常见）**
```
2.4G WiFi → 10.226.6.x 网段
5G WiFi   → 10.226.7.x 网段
```

**解决：** 都连同一个频段（都连2.4G或都连5G）

### 2. **多个SSID（WiFi名称）**
```
主WiFi     → 10.226.6.x
访客WiFi   → 10.226.7.x
```

**解决：** 连接同一个WiFi名称

### 3. **企业网络策略**
```
办公设备   → 10.226.6.x
访客设备   → 10.226.7.x
```

**解决：** 联系IT管理员或使用热点

### 4. **路由器配置**
```
有线连接   → 10.226.6.x
无线连接   → 10.226.7.x
```

**解决：** 都使用无线或使用热点

---

## ✅ **解决方案（按推荐顺序）**

### 🥇 方案 1：手机热点（100%成功）

```bash
步骤：
1. Android开启WiFi热点
   设置 → 连接与共享 → 个人热点 → 开启

2. Mac连接到Android热点
   WiFi图标 → 选择Android热点 → 输入密码

3. 现在肯定在同一网段了！
   Mac:     192.168.43.1
   Android: 192.168.43.xxx

4. 使用扫码或手动输入传输文件
```

**优点：**
- ✅ 100%成功
- ✅ 不受公司网络限制
- ✅ 速度快

### 🥈 方案 2：连接相同WiFi

```bash
检查当前连接：

Mac端：
系统设置 → WiFi → 查看连接的网络名称
例如："公司WiFi-5G"

Android端：
设置 → WiFi → 查看连接的网络名称
例如："公司WiFi-2.4G"  ❌ 名称不同！

改为连接同一个：
Mac:     "公司WiFi"
Android: "公司WiFi"      ✅ 相同！
```

### 🥉 方案 3：手动输入（跨网段也可能可用）

即使不在同一网段，如果网络允许互通，手动输入仍可用：

```bash
测试连通性：

# 在Mac终端测试能否ping通Android
ping 10.226.7.134

# 在Android上测试能否ping通Mac（需要终端app）
ping 10.226.6.13

如果能ping通 → 使用手动输入功能
如果ping不通 → 网络完全隔离，用方案1或2
```

---

## 🔧 **详细操作步骤**

### 使用热点方式（最推荐）：

**1. Android开启热点**
```
设置 → 连接与共享/网络和互联网
→ 个人热点/便携式热点
→ 开启WLAN热点
→ 记下热点名称和密码
```

**2. Mac连接热点**
```
点击WiFi图标
→ 找到Android热点名称
→ 输入密码连接
```

**3. 在Mac应用查看IP**
```
打开应用 → 发送文件
→ 查看"本机信息"卡片
→ IP地址应该是: 192.168.43.x
```

**4. 传输文件**
```
方式A（扫码）:
Mac: 选择文件 → 开始发送 → 显示二维码
Android: 接收文件 → 点击📷 → 扫码

方式B（手动）:
Mac: 查看IP（如192.168.43.1）
Android: 接收文件 → 点击✏️ → 输入IP
```

---

## 📱 **网段检测功能**

新版本已添加网段显示：

```
接收文件页面顶部显示：
接收文件
本机: 10.226.7.134
      ↑ 你的Android IP

如果Mac显示:
发送文件
IP地址: 10.226.6.13
        ↑ Mac IP

一眼就能看出是否在同一网段！
```

**判断规则：**
```
✅ 同一网段: 前3段数字相同
192.168.1.100
192.168.1.50   ✅ 都是 192.168.1.x

❌ 不同网段: 前3段有不同
10.226.6.13    
10.226.7.134   ❌ 第3段不同 (6 vs 7)
```

---

## 🎯 **快速诊断流程**

```
1. 查看两端IP地址
   Mac:     10.226.6.13
   Android: 10.226.7.134

2. 对比前3段数字
   10.226.6  vs  10.226.7  → 不同网段 ❌

3. 选择解决方案:
   
   ✅ 推荐: Android开热点，Mac连热点
   ✅ 备选: 连接相同WiFi名称
   ✅ 最后: 尝试手动输入（可能不通）

4. 确认在同一网段后
   192.168.43.1  vs  192.168.43.100  → 同网段 ✅
   
5. 选择传输方式:
   🥇 扫描二维码（最快）
   🥈 手动输入IP（最可靠）
   🥉 自动扫描（可选）
```

---

## 📝 **常见网段类型**

```
家庭路由器:
192.168.0.x  或  192.168.1.x  或  192.168.2.x

手机热点:
192.168.43.x (Android)
172.20.10.x  (iPhone)

企业网络:
10.x.x.x 段（你的情况）
172.16.x.x 到 172.31.x.x

公共WiFi:
各种各样的段
```

---

## ✅ **成功标志**

当你看到：
```
Mac:     192.168.43.1
Android: 192.168.43.xxx
         ↑ 前3段相同！

或

Mac:     192.168.1.100
Android: 192.168.1.50
         ↑ 前3段相同！
```

就可以愉快地传输文件了！

---

## 💡 **总结**

**你的问题：** 不同网段（10.226.6.x vs 10.226.7.x）

**最佳方案：** Android开热点，Mac连热点

**传输方式：** 扫码 > 手动输入 > 自动扫描

**记住：** 在同一网段 = 前3段数字相同

---

生成时间: $(date)
